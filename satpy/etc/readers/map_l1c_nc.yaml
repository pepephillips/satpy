reader:
  name: map_l1c_nc
  short_name: MAP L1C RAD NetCDF4
  long_name: CO2M MAP L1C Radiance (NetCDF4)
  description: >
    Reader for EUMETSAT CO2M Multi-Angle Polarimeter Level 1C Radiance files in NetCDF4 format per PFS V2L
  sensors: [map]
  reader: !!python/name:satpy.readers.yaml_reader.FileYAMLReader

  data_identification_keys:
    name:
      required: true
 #   wavelength:
 #     type: !!python/name:satpy.dataset.dataid.WavelengthRange
 #   resolution:
 #     transitive: false
 #   calibration:
 #     enum:
 #         - reflectance
 #         - brightness_temperature
 #         - radiance
 #         - counts
 #     transitive: true
    view:
      enum:
        - view1
        - view2
        - view3
        - view4
        - view5
      transitive: true
  #  stripe:
  #    enum:
  #      - a
  #      - b
  #      - i
  #      - f
  #  modifiers:
  #    default: []
  #    type: !!python/name:satpy.dataset.dataid.ModifierTuple

  #coord_identification_keys:
  #  name:
  #    required: true
  #  resolution:
  #    transitive: false
  #  view:
  #    enum:
  #      - nadir
  #      - oblique
  #    transitive: true
  #  stripe:
  #    enum:
  #      - a
  #      - b
  #      - i
  #      - f
file_types:
  # EUMETSAT CO2M Multi-Angle Polarimeter Level 1C Radiance files in NetCDF4 format
  nc_map_l1c_rad:
    file_reader: !!python/name:satpy.readers.map_l1c_nc.MapL1cNCFileHandler
    #file_patterns: ['W_XX-EUMETSAT-Darmstadt,SAT,{spacecraft_name:s}-VII-1C-RAD_C_EUMT_{creation_time:%Y%m%d%H%M%S}_{mission_type:s}_{environment:s}_{sensing_start_time:%Y%m%d%H%M%S}_{sensing_end_time:%Y%m%d%H%M%S}_{disposition_mode:s}_{processing_mode:s}____.nc']
    file_patterns: ['{spacecraft_name:s}_MAP_1C_RAD_______ON_{sensing_start_time:%Y%m%d%H%M%S}_{sensing_end_time:%Y%m%d%H%M%S}_yyyymmddTHHMMSS_xxx_xxx_EUM__{environment:s}_{disposition_mode:s}_{processing_mode:s}_C00.nc']

    #cached_longitude: data/measurement_data/longitude
    #cached_latitude: data/measurement_data/latitude

datasets:
# --- Coordinates ---
  lon_pixels:
    name: lon_pixels
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data_dem/longitude
    #orthorect_data: data/measurement_data/delta_lon_E_dem
    standard_name: longitude

  lat_pixels:
    name: lat_pixels
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data_dem/latitude
    #orthorect_data: data/measurement_data/delta_lat_N_dem
    standard_name: latitude


# --- Measurement data ---
  map_443_I:
    name: map_443_I
    file_type: nc_map_l1c_rad
    file_key: data/observation_data/rad_443/radiance_I
    coordinates: [lat_pixels, lon_pixels]
    view: [view1, view2, view3, view4, view5]
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
    chan_solar_index: 2
    wavelength: [0.433, 0.443, 0.453]

  map_555_I:
    name: map_555_I
    file_type: nc_map_l1c_rad
    file_key: data/observation_data/rad_555/radiance_I
    coordinates: [lat_pixels, lon_pixels]
    view: [view1, view2, view3, view4, view5]
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
    chan_solar_index: 3
    wavelength: [0.545, 0.555, 0.565]

  map_670_20_I:
    name: map_670_I
    file_type: nc_map_l1c_rad
    file_key: data/observation_data/rad_670/radiance_I
    coordinates: [lat_pixels, lon_pixels]
    view: [view1, view2, view3, view4, view5]
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
    chan_solar_index: 4
    wavelength: [0.660, 0.670, 0.680]

  map_670_Q:
    name: map_670_Q
    file_type: nc_map_l1c_rad
    file_key: data/observation_data/rad_670/radiance_Q
    coordinates: [lat_pixels, lon_pixels]
    view: [view1, view2, view3, view4, view5]
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
    chan_solar_index: 4
    wavelength: [0.660, 0.670, 0.680]

  map_670_20_U:
    name: map_670_20_U
    file_type: nc_map_l1c_rad
    file_key: data/observation_data/rad_670/radiance_U
    coordinates: [lat_pixels, lon_pixels]
    view: [view1, view2, view3, view4, view5]
    calibration:
      reflectance:
        standard_name: toa_bidirectional_reflectance
        units: "%"
      radiance:
        standard_name: toa_outgoing_radiance_per_unit_wavelength
    chan_solar_index: 4
    wavelength: [0.660, 0.670, 0.680]



#-------------------------------------------------------------------------------------------------------------------------------------

  # --- Geometric data ---
  
  solar_zenith:
    name: solar_zenith_angle
    standard_name: solar_zenith_angle
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data/solar_zenith_angle
    view: [view1, view2, view3, view4, view5]
    #interpolate: True
    coordinates: [lat_pixels, lon_pixels]

  solar_azimuth:
    name: solar_azimuth_angle
    standard_name: solar_azimuth_angle
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data/solar_azimuth_angle
    view: [view1, view2, view3, view4, view5]
    #interpolate: True
    coordinates: [lat_pixels, lon_pixels]

  sensor_zenith:
    name: viewing_zenith_angle
    standard_name: sensor_zenith_angle
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data/viewing_zenith_angle
    view: [view1, view2, view3, view4, view5]
    #interpolate: True
    coordinates: [lat_pixels, lon_pixels]

  sensor_azimuth:
    name: viewing_azimuth_angle
    standard_name: sensor_azimuth_angle
    file_type: nc_map_l1c_rad
    file_key: data/geolocation_data/viewing_azimuth_angle
    view: [view1, view2, view3, view4, view5]
    #interpolate: True
    coordinates: [lat_pixels, lon_pixels]


